<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <title>SitgesArt - Estat de la ColÂ·lecciÃ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body class="bg-slate-950 text-white p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold mb-2">Estat de la Base de Dades ğŸ¨</h1>
        <p class="text-slate-400 mb-8">ComparaciÃ³ entre la llista ideal de 100 personatges i Firebase.</p>
        
        <div id="stats" class="mb-6 text-xl font-semibold text-blue-400">Carregant dades...</div>
        
        <div id="graella" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3">
            </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAV8SrQ3tDiixCRwUDgC33jI8ZJzlcceZc",
            authDomain: "sitgesart.firebaseapp.com",
            projectId: "sitgesart",
            storageBucket: "sitgesart.firebasestorage.app",
            messagingSenderId: "673959867307",
            appId: "1:673959867307:web:80607c11d79db42b4918ee"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Els primers 20 de la llista (per provar, pots posar els 100)
        const llistaIdeal = [
            "Santiago RusiÃ±ol", "Ramon Casas", "Miquel Utrillo", "Arcadi Mas i Fondevila", 
            "Joaquim de MirÃ³", "Joan Roig i Soler", "Antoni Almirall", "Felip MasÃ³", 
            "Pere Jou", "Artur Carbonell", "Charles Deering", "Facundo BacardÃ­", 
            "Josep MirÃ³ i Argenter", "Manuel Blesa", "Jose Luis Fuentetaja"
            // ... afegeix aquÃ­ la resta fins a 100
        ];

        async function comparar() {
            const querySnapshot = await getDocs(collection(db, "obres"));
            const nomsA_BBDD = [];
            querySnapshot.forEach((doc) => {
                nomsA_BBDD.push(doc.data().nom.toLowerCase().trim());
            });

            const graella = document.getElementById('graella');
            graella.innerHTML = "";
            let trobats = 0;

            llistaIdeal.forEach(nom => {
                const existeix = nomsA_BBDD.some(n => n.includes(nom.toLowerCase().trim()));
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg border ${existeix ? 'bg-green-900/30 border-green-500 text-green-200' : 'bg-slate-900 border-slate-700 text-slate-500'}`;
                div.innerHTML = `${nom} ${existeix ? 'âœ…' : 'âŒ'}`;
                graella.appendChild(div);
                if (existeix) trobats++;
            });

            document.getElementById('stats').innerText = `${trobats} de ${llistaIdeal.length} completats (${Math.round(trobats/llistaIdeal.length*100)}%)`;
        }

        comparar();
    </script>
</body>
</html>
